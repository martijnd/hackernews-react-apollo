[{"/home/martijn/code/hackernews-react-apollo/src/index.js":"1","/home/martijn/code/hackernews-react-apollo/src/reportWebVitals.js":"2","/home/martijn/code/hackernews-react-apollo/src/components/App.js":"3","/home/martijn/code/hackernews-react-apollo/src/components/LinkList.js":"4","/home/martijn/code/hackernews-react-apollo/src/components/Link.js":"5","/home/martijn/code/hackernews-react-apollo/src/components/CreateLink.js":"6","/home/martijn/code/hackernews-react-apollo/src/components/Header.js":"7","/home/martijn/code/hackernews-react-apollo/src/components/Login.js":"8","/home/martijn/code/hackernews-react-apollo/src/constants.js":"9","/home/martijn/code/hackernews-react-apollo/src/utils.js":"10","/home/martijn/code/hackernews-react-apollo/src/components/Search.js":"11"},{"size":1508,"mtime":1608761898950,"results":"12","hashOfConfig":"13"},{"size":362,"mtime":1608756787320,"results":"14","hashOfConfig":"13"},{"size":850,"mtime":1608761536000,"results":"15","hashOfConfig":"13"},{"size":2616,"mtime":1608762326990,"results":"16","hashOfConfig":"13"},{"size":2091,"mtime":1608761405490,"results":"17","hashOfConfig":"13"},{"size":2317,"mtime":1608761399770,"results":"18","hashOfConfig":"13"},{"size":1608,"mtime":1608760479570,"results":"19","hashOfConfig":"13"},{"size":2924,"mtime":1608760599200,"results":"20","hashOfConfig":"13"},{"size":73,"mtime":1608761157780,"results":"21","hashOfConfig":"13"},{"size":1376,"mtime":1608761003080,"results":"22","hashOfConfig":"13"},{"size":1235,"mtime":1608761671300,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1gs53i",{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"31"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"34","messages":"35","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"31"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"31"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"31"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"31"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"31"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"31"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"31"},"/home/martijn/code/hackernews-react-apollo/src/index.js",[],"/home/martijn/code/hackernews-react-apollo/src/reportWebVitals.js",[],["49","50"],"/home/martijn/code/hackernews-react-apollo/src/components/App.js",[],["51","52"],"/home/martijn/code/hackernews-react-apollo/src/components/LinkList.js",["53","54","55"],"/home/martijn/code/hackernews-react-apollo/src/components/Link.js",["56","57","58"],"import { gql, useMutation } from '@apollo/client';\nimport React from 'react';\nimport { AUTH_TOKEN, LINKS_PER_PAGE } from '../constants';\nimport { timeDifferenceForDate } from '../utils';\nimport { FEED_QUERY } from './LinkList';\n\nconst VOTE_MUTATION = gql`\n  mutation VoteMutation($linkId: ID!) {\n    vote(linkId: $linkId) {\n      id\n      link {\n        id\n        votes {\n          id\n          user {\n            id\n          }\n        }\n      }\n      user {\n        id\n      }\n    }\n  }\n`;\n\nconst Link = (props) => {\n  const { link } = props;\n  const authToken = localStorage.getItem(AUTH_TOKEN);\n\n  const take = LINKS_PER_PAGE;\n  const skip = 0;\n  const orderBy = { createdAt: 'desc' };\n\n  const [vote] = useMutation(VOTE_MUTATION, {\n    variables: {\n      linkId: link.id\n    },\n    update(cache, { data: { vote } }) {\n      const { feed } = cache.readQuery({\n        query: FEED_QUERY\n      });\n\n      const updatedLinks = feed.links.map((feedLink) => {\n        if (feedLink.id === link.id) {\n          return {\n            ...feedLink,\n            votes: [...feedLink.votes, vote]\n          };\n        }\n        return feedLink;\n      });\n\n      cache.writeQuery({\n        query: FEED_QUERY,\n        data: {\n          feed: {\n            links: updatedLinks\n          }\n        }\n      });\n    }\n  });\n\n  return (\n    <div className=\"flex mt2 items-start\">\n      <div className=\"flex items-center\">\n        <span className=\"gray\">{props.index + 1}.</span>\n        {authToken && (\n          <div\n            className=\"ml1 gray f11\"\n            style={{ cursor: 'pointer' }}\n            onClick={vote}\n          >\n            â–²\n          </div>\n        )}\n      </div>\n      <div className=\"ml1\">\n        <div>\n          {link.description} ({link.url})\n        </div>\n        {authToken && (\n          <div className=\"f6 lh-copy gray\">\n            {link.votes.length} votes | by{' '}\n            {link.postedBy ? link.postedBy.name : 'Unknown'}{' '}\n            {timeDifferenceForDate(link.createdAt)}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Link;","/home/martijn/code/hackernews-react-apollo/src/components/CreateLink.js",[],"/home/martijn/code/hackernews-react-apollo/src/components/Header.js",[],"/home/martijn/code/hackernews-react-apollo/src/components/Login.js",[],"/home/martijn/code/hackernews-react-apollo/src/constants.js",[],"/home/martijn/code/hackernews-react-apollo/src/utils.js",[],"/home/martijn/code/hackernews-react-apollo/src/components/Search.js",[],{"ruleId":"59","replacedBy":"60"},{"ruleId":"61","replacedBy":"62"},{"ruleId":"59","replacedBy":"63"},{"ruleId":"61","replacedBy":"64"},{"ruleId":"65","severity":1,"message":"66","line":92,"column":9,"nodeType":"67","messageId":"68","endLine":92,"endColumn":18},{"ruleId":"65","severity":1,"message":"69","line":94,"column":17,"nodeType":"67","messageId":"68","endLine":94,"endColumn":24},{"ruleId":"65","severity":1,"message":"70","line":94,"column":26,"nodeType":"67","messageId":"68","endLine":94,"endColumn":31},{"ruleId":"65","severity":1,"message":"71","line":31,"column":9,"nodeType":"67","messageId":"68","endLine":31,"endColumn":13},{"ruleId":"65","severity":1,"message":"72","line":32,"column":9,"nodeType":"67","messageId":"68","endLine":32,"endColumn":13},{"ruleId":"65","severity":1,"message":"73","line":33,"column":9,"nodeType":"67","messageId":"68","endLine":33,"endColumn":16},"no-native-reassign",["74"],"no-negated-in-lhs",["75"],["74"],["75"],"no-unused-vars","'pageIndex' is assigned a value but never used.","Identifier","unusedVar","'loading' is assigned a value but never used.","'error' is assigned a value but never used.","'take' is assigned a value but never used.","'skip' is assigned a value but never used.","'orderBy' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]